---
layout: default
title: Chapter 02
parent: Designing Data-Intensive Applications
grand_parent: Books
description: "Chapter 02"
permalink: /books/designing-data-intensive-applications/chapter-02
---
# Chapter 02. 데이터 모델과 질의 언어
데이터 모델은 아마도 소프트웨어 개발에서 제일 중요한 부분으로 - 소프트웨어가 어떻게 작성됐는지 뿐만 아니라, 해결하려는 문제를 어떻게 생각해야 하는지에 대해서도 지대한 영향을 미친다.

데이터 모델을 표현하는 방법 예시
- 애플리케이션 개발자: api 모델링
- 데이터 구조 저장시: XML, JSON, RDB 등등 이용
- 개발자는 데이터 어떻게 표현할지 결정
- 더 낮은 수준에서 하드웨어 엔지니어는 전류 빛의 파동 자기장의 관점에서 바이트 표현방법 알아냄

각 계층은 명확한 데이터 모델을 제공해 하위 계층의 복잡성을 숨긴다. 추상화를 통해 다른 그룹의 사람들이 효율적으로 함께 일할 수 있게끔 한다.
데이터 모델은 소프트웨어가 할수 있는일과 없는 일에 지대한 영향을 주므로 애플리케이션에 적합한 데이터 모델을 선택하는 작업은 상당히 중요하다.
이번 장에서는 관계형 모델 / 문서모델/ 몇가지 그래프 기반 데이터 모델을 비교하고, 다양한 질의언어도 비교한다.

## 관계형 모델과 문서 모델
SQL - 데이터는 관계로 구성되고, 각 관계는 순서없는 튜플 (SQL에서 로우) 모음이다. 
RDB의 근원은, 1960~1970년대에 메인프레임 컴퓨터에서 수행된 비즈니스 데이터 처리에 있고, 보통 트랜잭션 처리와 일괄처리 등에 사용되었다.
관계형 모델의 목표는 정리된 인터페이스 뒤로 구현 세부사항을 숨기는 것 이다.
수년 동안 여러 모델이 경쟁했고, 네트워크 모델과 계층모델이 주요 대안이었지만 관계형 모델이 우위를 차지했다. 
그러면서 관계형 데이터베이스가 비즈니스 데이터 처리라는 본래 영역을 넘어 폭넓은 다양한 사용사례에도 보편화 되었다. 

### NoSQL의 탄생
NoSQL은 관계형 모델의 우위를 뒤집으려는 가장 최신 시도로, Not Only SQL로 재해셕된다. 
채택이유로는 여러가지가 있는데
- 대규모 데이터셋이나 매우 높은 쓰기 처리량 달성을 쉽게 할 수 있는 뛰어난 확장성
- 오픈소스에 대한 선호도 확산
- RDB에서 지원하지 않는 특수 질의 동작
- RDB 스키마 제한에 대한 불만과 동적이고 표현력 풍부한 데이터 모델에 대한 바람
  
가까운 미래에는 RDB가 폭넓은 다양함을 가진 비관계형 데이터 스토어와 함께 사용될것 -> "polyglot persistence"

### 객체 관계형 불일치
오늘날 대부분 애플리케이션은 객체지향 언어로 개발하는데, 데이터를 RDB에 저장하려면 애플리케이션 코드와 데이터 베이스 모델 객체 사이에 전환계층이 필요하다.
이런 분리를 **임피던스 불일치**라고 부른다.

ORM 프레임워크를 통해 코드 양은 줄이지만, 두 모델간 차이를 완벽히 숨길 수는 없다. 
예를들어 링크드인의 프로필데이터 -> 이력서 같은 데이터 구조는 모든 내용을 갖추고 있는 문서라 JSON 표현에 매우 적합하다. 
Document-oriented DB는 JSON 데이터 모델을 지원한다 (몽고DB, 카우치DB 등)
물론 데이터 부호화 형식으로써 JSON이 가진 문제도 있지만 이는 나중에 설명

JSON 표현은 더 나은 지역성을 가지며, RDB라면 다중 질의, 다중 조인을 수행해야 하는데 JSON 표현에서는 모든 관련 정보가 한 곳에 있어서 쿼리 하나로 충분하다. 

### 다대일과 다대다 관계
몇가지 값은 ID로 저장되어 있는데 그 이유는 표준목록을 만들어 드롭다운 리스트나, 자동 완성 기능을 만들기 편리하기 떄문이다. 
또한 중복의 문제로 ID를 사용하는 경우 - 의미있는 정보만 한 곳에 저장하고, 참조하는 모든것을 ID를 활용한다. 
또한 ID 자체는 아무 의미가 없기 때문에 변경할 필요가 없고, 의미를 가지는 경우라면 언젠가는 변경해야 할 수도 있다. 

중복된 데이터를 정규화하려면 **다대일 관계**가 필요한데 다데일 관계는 문서모델에 적합하지 않다. 
관계형 데이터베이스는 조인이 쉬워서 다른 테이블참조가 일반적이지만, 문서 db는 조인에 대한 지원이 보통 약하다.

DB 자체가 조인을 지원하지 않으면 애플리케이션 코드에서 조인을 흉내내야 한다. 

## 문서 데이터베이스는 역사를 반복하고 있나?










